apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../../apps/flux-system/ithc/base
  - ../../../apps/admin/base/kustomize.yaml
  - ../../../apps/kube-system/base/kustomize.yaml
  - ../../../apps/kured/base/kustomize.yaml
  - ../../../apps/monitoring/base/kustomize.yaml
  - ../../../apps/neuvector/base/kustomize.yaml
  - ../../../apps/adoption/base/kustomize.yaml
  - ../../../apps/cnp/base/kustomize.yaml
  - ../../../apps/idam/base/kustomize.yaml
  - ../../../apps/financial-remedy/base/kustomize.yaml
  # div-pfe-nodejs: unknown redis_error Failed to connect to Redis connect ECONNREFUSED
  # - ../../../apps/divorce/base/kustomize.yaml
  - ../../../apps/wa/base/kustomize.yaml
  # MountVolume.SetUp failed for volume "vault-nfdiv”. A secret with (name/id) redis-access-key was not found in this key vault.
  # - ../../../apps/nfdiv/base/kustomize.yaml
  - ../../../apps/hmc/base/kustomize.yaml
  - ../../../apps/et/base/kustomize.yaml
  - ../../../apps/civil/base/kustomize.yaml
  - ../../../apps/probate/base/kustomize.yaml
  - ../../../apps/ccd/base/kustomize.yaml
  - ../../../apps/xui/base/kustomize.yaml
  - ../../../apps/fees-pay/base/kustomize.yaml
  - ../../../apps/dg/base/kustomize.yaml
  - ../../../apps/aac/base/kustomize.yaml
  - ../../../apps/am/base/kustomize.yaml
  # MountVolume.SetUp failed for volume "vault-bar”. A secret with (name/id) bar-IDAM-CLIENT-SECRET was not found in this key vault.
  # - ../../../apps/bar/base/kustomize.yaml
  - ../../../apps/camunda/base/kustomize.yaml
  - ../../../apps/cpo/base/kustomize.yaml
  - ../../../apps/dm-store/base/kustomize.yaml
  - ../../../apps/docmosis/base/kustomize.yaml
  - ../../../apps/em/base/kustomize.yaml
  - ../../../apps/fact/base/kustomize.yaml
  - ../../../apps/family-public-law/base/kustomize.yaml
  - ../../../apps/ia/base/kustomize.yaml
  - ../../../apps/lau/base/kustomize.yaml
  # 2023-07-24 helmrelease/cmc-claim-store - reconciliation failed: previous release attempt remediation failed
  # - ../../../apps/money-claims/base/kustomize.yaml
  - ../../../apps/pcq/base/kustomize.yaml
  - ../../../apps/private-law/base/kustomize.yaml
  - ../../../apps/rd/base/kustomize.yaml
  - ../../../apps/rpe/base/kustomize.yaml
  - ../../../apps/rpts/base/kustomize.yaml
  # MountVolume.SetUp failed for volume "vault-sscs”. A secret with (name/id) hmc-servicebus-shared-access-key-tf was not found in this key vault.
  # - ../../../apps/sscs/base/kustomize.yaml
  - ../../../apps/ts/base/kustomize.yaml
  # MountVolume.SetUp failed for volume "vault-fis-kv”. A secret with (name/id) idam-system-user-name was not found in this key vault.
  # - ../../../apps/fis/base/kustomize.yaml
  - ../../../apps/sptribs/base/kustomize.yaml
  # MountVolume.SetUp failed for volume "vault-jps”. The user, group or application 'appid=6f01c8cf-811e-439b-be35-dc4028a5c74c;oid=810081b2-6b18-4bed-8939-7e1e0ec1e3b8;iss=https://sts.windows.net/531ff96d-0ae9-462a-8d2d-bec7c0b42082/' does not have secrets get permission on key vault.
  # - ../../../apps/jps/base/kustomize.yaml
  - ../../../apps/tax-tribunals/base/kustomize.yaml
  - ../../../apps/cui/base/kustomize.yaml
  - ../../../apps/azureserviceoperator-system/base/kustomize.yaml
  - ../../../apps/keda/base/kustomize.yaml
  - ../../../apps/et-pet/base/kustomize.yaml
  - ../../../apps/help-with-fees/base/kustomize.yaml
  - ../../../apps/disposer/base/kustomize.yaml
patches:
  - path: ../../../apps/base/kustomize.yaml
    target:
      kind: Kustomization
      annotationSelector: hmcts.github.com/kustomize-defaults != disabled
  - path: ../../../apps/tax-tribunals/ithc/base/kustomize.yaml
  - path: ../../../apps/neuvector/ithc/base/kustomize.yaml
  - path: ../../../apps/admin/ithc/base/kustomize.yaml