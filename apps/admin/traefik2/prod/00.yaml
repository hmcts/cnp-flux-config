apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: traefik2
  namespace: admin
spec:
  values:
    service:
      spec:
        loadBalancerIP: "10.90.79.250"
    affinity:
      nodeAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 1
            preference:
              matchExpressions:
                - key: kubernetes.azure.com/mode
                  operator: In
                  values:
                    - linux