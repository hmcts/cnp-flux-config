apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../base
  - ../../keda
  - ../../secrets-csi-driver
  - kube-slack-values.yaml
  - ../../../rbac/reader-clusterrole.yaml
  - ../../traefik2
  - ../../aad-pod-id/mi

patchesStrategicMerge:
  - keda-identity.yaml
  - ../../traefik2/prod/secret-provider.yaml
  - ../../aad-pod-id/mi/prod/azure-identity-patch.yaml
patches:
  - path: ../../../rbac/prod-reader-clusterrole.yaml
    target:
      kind: ClusterRoleBinding
      labelSelector: role-type=developer
