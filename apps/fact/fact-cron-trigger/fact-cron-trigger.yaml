apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: fact-cron-trigger
spec:
  releaseName: fact-cron-trigger
  values:
    job:
      useInterpodAntiAffinity: true
      image: hmctspublic.azurecr.io/fact/cron-trigger:prod-e3e32cf-20250429094850 #{"$imagepolicy": "flux-system:fact-cron-trigger"}
      schedule: "*/10 * * * 1,2,3,4,5,6"
  chart:
    spec:
      chart: ./stable/fact-cron-trigger
      sourceRef:
        kind: GitRepository
        name: hmcts-charts
        namespace: flux-system
      interval: 5m



apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: sptribs-cron-trigger-complete-hearing-outcome
spec:
  releaseName: sptribs-cron-trigger-complete-hearing-outcome
  values:
    job:
      image: hmctspublic.azurecr.io/sptribs/case-api:prod-c0a5f54-20250203114000 #{"$imagepolicy": "flux-system:sptribs-case-api"}
      keyVaults:
        sptribs:
          secrets:
            - name: app-insights-connection-string
              alias: app-insights-connection-string
            - name: uk-gov-notify-api-key
              alias: UK_GOV_NOTIFY_API_KEY
            - name: s2s-case-api-secret
              alias: S2S_SECRET
            - name: idam-secret
              alias: IDAM_CLIENT_SECRET
            - name: idam-systemupdate-username
              alias: IDAM_SYSTEM_UPDATE_USERNAME
            - name: idam-systemupdate-password
              alias: IDAM_SYSTEM_UPDATE_PASSWORD
            - name: launchDarkly-sdk-key
              alias: LAUNCH_DARKLY_SDK_KEY
      environment:
        TASK_NAME: SystemTriggerCompleteHearingOutcomeTask
      schedule: 0 8 * * 1-5
  chart:
    spec:
      chart: sptribs-cron
      version: 1.0.10
      sourceRef:
        kind: HelmRepository
        name: hmctspublic
        namespace: flux-system