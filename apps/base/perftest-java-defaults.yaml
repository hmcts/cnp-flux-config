apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: perftest-java-defaults
  namespace: flux-system
  annotations:
    hmcts.github.com/env-label: perftest
spec:
  interval: 1m0s
  sourceRef:
    kind: GitRepository
    name: flux-config
    namespace: flux-system
  patches:
    - patch: |-
        apiVersion: helm.toolkit.fluxcd.io/v2
        kind: HelmRelease
        metadata:
          name: placeholder
        spec:
          interval: 5m
          values:
            java:
              environment:
                JAVA_TOOL_OPTIONS: -XX:InitialRAMPercentage=30.0 -XX:MaxRAMPercentage=65.0 -XX:MinRAMPercentage=30.0 -javaagent:/opt/app/applicationinsights-agent-${APPLICATIONINSIGHTS_AGENT_VERSION:-3.5.4}.jar
      target:
        kind: HelmRelease
