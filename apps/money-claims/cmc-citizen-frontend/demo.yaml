apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: cmc-citizen-frontend
  namespace: money-claims
spec:
  values:
    nodejs:
      image: hmctspublic.azurecr.io/cmc/citizen-frontend:pr-3736-b6bbc53-20260227140409 #{"$imagepolicy": "flux-system:demo-cmc-citizen-frontend"}
      ingressHost: moneyclaims1.demo.platform.hmcts.net
      environment:
        DUMMY_RESTART_VAR: true
        RESTART_TRIGGER: 1
        SESSION_USE_REDIS_STORE: "true"
        SESSION_REDIS_HOST: civil-citizen-ui-draft-store-demo.redis.cache.windows.net
        SESSION_REDIS_PORT: "6380"
        SESSION_REDIS_TLS: "true"
        SESSION_REDIS_KEY_PREFIX: "citizen-ui-session:"
        GA_TRACKING_ID: UA-97111056-1
        FEATURE_TESTING_SUPPORT: true
        FEATURE_RETURN_ERROR_TO_USER: true
        PCQ_URL: https://pcq.demo.platform.hmcts.net
        DRAFT_STORE_URL: http://draft-store-service-demo.service.core-compute-demo.internal
        PAY_RETURN_URL: https://moneyclaims1.demo.platform.hmcts.net
        CUI_URL: https://moneyclaims.demo.platform.hmcts.net
        CIVIL_CITIZEN_URL: https://moneyclaims.demo.platform.hmcts.net
        CIVIL_CITIZEN_UI_REDIRECT: true
        CUI_DASHBOARD_REDIRECT: true
        CUI_SIGN_OUT_REDIRECT: true
        CUI_DASHBOARD_URL: https://moneyclaims.demo.platform.hmcts.net/dashboard

      keyVaults:
        cmc:
          secrets:
            - os-postcode-lookup-api-key
            - AppInsightsInstrumentationKey
            - citizen-oauth-client-secret
            - cmc-s2s-secret
            - citizen-draft-store-primary
            - citizen-draft-store-secondary
            - citizen-cookie-encryption-key
            - staff-email
            - cmc-webchat-id
            - cmc-webchat-tenant
            - cmc-webchat-button-no-agents
            - cmc-webchat-button-agents-busy
            - cmc-webchat-button-service-closed
            - postcode-lookup-api-key
            - launchDarkly-sdk-key
            - pcq-token-key
            - draft-store-access-key