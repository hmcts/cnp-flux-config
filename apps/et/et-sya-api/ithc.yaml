apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: et-sya-api
  namespace: et
spec:
  releaseName: et-sya-api
  values:
    java:
      image: hmctspublic.azurecr.io/et/sya-api:pr-242-da35518-20230301105334 #{"$imagepolicy": "flux-system:ithc-et-sya-api"}
      environment:
        SUBMIT_CASE_EMAIL_TEMPLATE_ID: 10c31d51-c518-4d73-b2c3-1c02771ef41e
        CY_SUBMIT_CASE_EMAIL_TEMPLATE_ID: f61f7f2a-4825-491b-bc48-0299f1a8ba23
      keyVaults:
        et-sya-api:
          secrets:
            - name: et-sya-api-s2s-secret
              alias: ET_SYA_S2S_SECRET
            - name: Ocp-Apim-Subscription-Key
              alias: ACAS_KEY
            - name: et-api-caseworker-user-name
              alias: CASEWORKER_USER_NAME
            - name: et-api-caseworker-password
              alias: CASEWORKER_PASSWORD
            - name: acas-idam-client-secret
              alias: IDAM_CLIENT_SECRET
        et:
          secrets:
            - name: AppInsightsInstrumentationKey
              alias: APP_INSIGHTS_KEY
            - name: tornado-access-key
              alias: TORNADO_ACCESS_KEY
            - name: gov-notify-api-key
              alias: GOV_NOTIFY_API_KEY
