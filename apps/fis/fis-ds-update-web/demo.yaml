apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: fis-ds-update-web
  namespace: fis
spec:
  values:
    nodejs:
      ingressSessionAffinity:
        enabled: true
        sessionCookieName: sticky
      image: hmctspublic.azurecr.io/fis/ds-update-web:prod-7f04107-20240117202623 #{"$imagepolicy": "flux-system:demo-fis-ds-update-web"}
      environment:
        NODE_ENV: demo
        IDAM_API_URL: https://idam-api.demo.platform.hmcts.net/o/token
        IDAM_WEB_URL: https://idam-web-public.demo.platform.hmcts.net/login
        REFORM_TEAM: fis
        REFORM_SERVICE_NAME: fis-ds-update-web
        RPE_API: http://rpe-service-auth-provider-demo.service.core-compute-demo.internal
        FIS_COS_API: http://fis-cos-api-demo.service.core-compute-demo.internal
        REDIS_HOST: fis-ds-update-web-demo-demo.redis.cache.windows.net
      keyVaults:
        fis-kv:
          secrets:
            - redis-access-key
            - redis-access-key-v6
            - AppInsightsInstrumentationKey
    global:
      environment: demo
      tenantId: "531ff96d-0ae9-462a-8d2d-bec7c0b42082"
      enableKeyVaults: true
