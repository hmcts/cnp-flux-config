apiVersion: dbforpostgresql.azure.com/v1api20210601
kind: FlexibleServer
metadata:
 name: ${NAMESPACE}-flexibleserver-postgres-${ENVIRONMENT}
 namespace: ${NAMESPACE}
 annotations:
  serviceoperator.azure.com/reconcile-policy: detach-on-delete
spec:
 owner:
  name: ${NAMESPACE}-aso-${ENVIRONMENT}-rg  #created ahead and added to flux
 location: uksouth
 version: "11"
 sku:
  name: Standard_B1ms
  tier: Burstable
 administratorLogin: hmcts
 administratorLoginPassword:
  name: sscs-postgres
  key: PASSWORD
 storage:
  storageSizeGB: 32
 network:
  delegatedSubnetResourceReference:
   armId: /subscriptions/d025fece-ce99-4df2-b7a9-b649d3ff2060/resourceGroups/cft-demo-network-rg/providers/Microsoft.Network/virtualNetworks/cft-demo-vnet/subnets/postgresql
  privateDnsZoneArmResourceReference:
   armId: /subscriptions/1baf5470-1c3e-40d3-a6f7-74bfbce4b348/resourceGroups/core-infra-intsvc-rg/providers/Microsoft.Network/privateDnsZones/privatelink.postgres.database.azure.com