apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: ia-hearings-api
  namespace: ia
spec:
  releaseName: ia-hearings-api
  values:
    java:
      disableTraefikTls: true
      image: hmctspublic.azurecr.io/ia/hearings-api:prod-8553037-20220727161248
      replicas: 2
      autoscaling:
        enabled: true
        maxReplicas: 5
        targetCPUUtilizationPercentage: 80
      useInterpodAntiAffinity: true
  chart:
    spec:
      releaseName: ia-hearings-api
      chart:
        git: git@github.com:hmcts/hmcts-charts
        ref: master
        path: stable/ia-hearings-api
      sourceRef:
        kind: HelmRepository
        name: hmctspublic
        namespace: flux-system


