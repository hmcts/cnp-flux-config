apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: div-cms
  namespace: divorce
spec:
  values:
    java:
      autoscaling:
        enabled: true
        minReplicas: 1
        maxReplicas: 2
      memoryRequests: '1536Mi'
      memoryLimits: '2048Mi'
      cpuRequests: '250m'
      cpuLimits: '1500m'
      targetCPUUtilizationPercentage: 80
      targetMemoryUtilizationPercentage: 80
      image: hmctspublic.azurecr.io/div/cms:prod-47fd6f9-20251022113741 #{"$imagepolicy": "flux-system:div-cms"}
      environment:
        IDAM_API_BASEURL: "https://idam-api.ithc.platform.hmcts.net"
        VAR_FV2: ithc1
      prometheus:
        enabled: true
