apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: probate-cron-exela-extract
spec:
  releaseName: probate-cron-exela-extract
  values:
    job:
      image: hmctspublic.azurecr.io/probate/back-office:pr-3092-6986adf-20250423155537 #{"$imagepolicy": "flux-system:demo-probate-back-office"}
      schedule: "17 12 * * *"
      environment:
        TRIG: trig-1
        ADHOC_JOB_DATE: "2024-01-20"
        ADHOC_JOB_TO_DATE: "2025-04-09"
        EXCELA_EMAIL: "Tom.Saunders@justice.gov.uk"
      keyVaults:
        probate:
          secrets:
            - name: AppInsightsInstrumentationKey
              alias: azure.application-insights.instrumentation-key
            - name: app-insights-connection-string
              alias: app-insights-connection-string
    global:
      jobKind: CronJob
      enableKeyVaults: true
      tenantId: "531ff96d-0ae9-462a-8d2d-bec7c0b42082"
      environment: demo
