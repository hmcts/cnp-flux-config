apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: idam-hmcts-access
  namespace: idam
spec:
  releaseName: idam-hmcts-access
  values:
    nodejs:
      ingressHost: hmcts-access.perftest.platform.hmcts.net
      environment:
        SSO_PROVIDERS:
          azure:
            displayName: 'eJudiciary'
            domain: 'ejudiciary.net'
            issuer: 'https://idam-perftest-jumpbox.service.core-compute-idam-perftest.internal/auth/realms/jhipster'
            redirectPath: '/login/oauth2/code/oidc'
            client-id: 'internal'
            clientSecret: 'internal'
            idamApiProviderName: 'keycloak-sso'
            aliases:
              - 'ejudiciary-aad'
            clientType: 'oidc'
            claimMappings:
              forename: 'given_name'
              surname: 'family_name'
              providerId: 'sub'
            scopes:
              - openid
              - profile
              - email
          moj:
            displayname: 'Justice.gov.uk'
            domain: 'justice.gov.uk'
            issuer: 'https://idam-perftest-jumpbox.service.core-compute-idam-perftest.internal/auth/realms/jhipster'
            redirectPath: '/login/oauth2/code/moj'
            client-id: 'internal'
            clientSecret: 'internal'
            idamApiProviderName: 'keycloak-sso'
            clientType: 'oidc'
            claimMappings:
              forename: 'given_name'
              surname: 'family_name'
              providerId: 'sub'
            scopes:
              - openid
              - profile
              - email
