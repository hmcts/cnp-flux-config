apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: wa-case-event-handler
spec:
  values:
    java:
      environment:
        AZURE_SERVICE_BUS_FEATURE_TOGGLE: true
        AZURE_SERVICE_BUS_DLQ_FEATURE_TOGGLE: true
        LOGGING_LEVEL_UK_GOV_HMCTS: DEBUG
        RESILIENCE_RETRY_MAX_ATTEMPTS: 10
        RESILIENCE_RETRY_BACK_OFF_DELAY: 30000
        RESILIENCE_RETRY_BACK_OFF_MAX_DELAY: 60000
        RESILIENCE_RETRY_BACK_OFF_RANDOM: true
        CLEAN_UP_MESSAGE_LIMIT: 500
        CLEAN_UP_STARTED_DAYS_BEFORE: 90
        CLEAN_UP_STATE_FOR_PROD: PROCESSED
        CLEAN_UP_STATE_FOR_NON_PROD: PROCESSED
        RESTART: false
        PROBLEM_MESSAGE_RESET_ID_LIST: ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:21:1-8172,ID:ab72772e-44c8-45a7-9b74-87fc39ad1036:1:15:1-3295,ID:b3ed1d32-526d-499e-8689-7ba858738d57:1:80:1-12541,ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:108:1-10787,ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:92:1-1149,ID:b3ed1d32-526d-499e-8689-7ba858738d57:1:80:1-13361,ID:b3ed1d32-526d-499e-8689-7ba858738d57:1:62:1-18265,ID:e14463da-1175-4dee-be5c-c4be9adbea06:1:1:1-1924,ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:30:1-10670,ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:108:1-17532,ID:ab72772e-44c8-45a7-9b74-87fc39ad1036:1:15:1-8624,ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:92:1-19784,ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:30:1-9823,ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:30:1-18280,ID:47c34ad5-6a84-4669-913d-7338ec137930:1:34:1-12841,ID:9073cd03-7a1e-4da3-8b0f-17b180beb07e:1:17:1-16286,ID:ab72772e-44c8-45a7-9b74-87fc39ad1036:1:15:1-13508,ID:47c34ad5-6a84-4669-913d-7338ec137930:1:21:1-11252,ID:b3ed1d32-526d-499e-8689-7ba858738d57:1:62:1-18491,ID:66267ac5-30cd-49e0-ba3e-a7c0d1afb107:1:1:1-10767,ID:c6831fae-0361-4b78-962a-a05f42a64bae:1:30:1-413,ID:b3ed1d32-526d-499e-8689-7ba858738d57:1:62:1-8618,ID:b3ed1d32-526d-499e-8689-7ba858738d57:1:97:1-2900,ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:30:1-16442,ID:ab72772e-44c8-45a7-9b74-87fc39ad1036:1:15:1-11535,ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:21:1-5980,ID:b3ed1d32-526d-499e-8689-7ba858738d57:1:62:1-13249,ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:92:1-656,ID:66267ac5-30cd-49e0-ba3e-a7c0d1afb107:1:1:1-6253,ID:66267ac5-30cd-49e0-ba3e-a7c0d1afb107:1:1:1-973,ID:47c34ad5-6a84-4669-913d-7338ec137930:1:52:1-526,ID:ab72772e-44c8-45a7-9b74-87fc39ad1036:1:15:1-7148,ID:b3ed1d32-526d-499e-8689-7ba858738d57:1:62:1-2935,ID:47c34ad5-6a84-4669-913d-7338ec137930:1:70:1-10791,ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:108:1-12991,ID:b3ed1d32-526d-499e-8689-7ba858738d57:1:62:1-14715,ID:b3ed1d32-526d-499e-8689-7ba858738d57:1:80:1-19605,ID:47c34ad5-6a84-4669-913d-7338ec137930:1:52:1-2343,ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:30:1-16617,ID:47c34ad5-6a84-4669-913d-7338ec137930:1:34:1-16659,ID:cb5c3823-3b05-47e4-9ab5-d2e2ed1acc1e:1:43:1-3,ID:b3ed1d32-526d-499e-8689-7ba858738d57:1:62:1-5453,ID:180da2bb-c8ed-44af-a440-60195fe4fc76:1:92:1-1027,ID:47c34ad5-6a84-4669-913d-7338ec137930:1:34:1-20713,ID:47c34ad5-6a84-4669-913d-7338ec137930:1:34:1-5778,ID:c6831fae-0361-4b78-962a-a05f42a64bae:1:30:1-9154
        PROBLEM_MESSAGE_RESET_NULL_EVENT_TIMESTAMP_ID_LIST:
        PROBLEM_MESSAGE_SET_STATE_TO_PROCESSED_ID_LIST:
      keyVaults:
        wa:
          secrets:
            - name: app-insights-connection-string
              alias: app-insights-connection-string
            - name: s2s-secret-case-event-handler
              alias: S2S_SECRET_CASE_EVENT_HANDLER
            - name: ccd-shared-servicebus-connection-string
              alias: AZURE_SERVICE_BUS_CONNECTION_STRING
            - name: ld-secret
              alias: LAUNCH_DARKLY_SDK_KEY
            - name: wa-case-event-handler-POSTGRES-USER-V15
              alias: POSTGRES_USERNAME
            - name: wa-case-event-handler-POSTGRES-PASS-V15
              alias: POSTGRES_PASSWORD
            - name: wa-case-event-handler-POSTGRES-HOST-V15
              alias: POSTGRES_HOST
            - name: wa-case-event-handler-POSTGRES-PORT-V15
              alias: POSTGRES_PORT
            - name: wa-case-event-handler-POSTGRES-DATABASE-V15
              alias: POSTGRES_NAME
            - name: wa-idam-client-secret
              alias: WA_IDAM_CLIENT_SECRET
