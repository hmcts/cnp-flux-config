apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: adoption-cos-api
spec:
  releaseName: adoption-cos-api
  interval: 1m
  values:
    java:
      image: hmctspublic.azurecr.io/adoption/cos-api:pr-677-54ea939-20230405114401 #{"$imagepolicy": "flux-system:demo-adoption-cos-api"}
      environment:
        APP_INSIGHTS_KEY: '6c5278dd-ee76-4e7b-92f9-57b27ead382e'
        LA_PORTAL_BASEURL: https://adoption-web.{{ .Values.global.environment }}.platform.hmcts.net/la-portal/kba-case-ref
        MULTI_CHILDREN_CUI_URL: https://adoption-web.{{ .Values.global.environment }}.platform.hmcts.net/new-application-redirect
      keyVaults:
        adoption:
          secrets:
            - name: send-grid-api-key
              alias: SEND_GRID_API_KEY
            - name: sendgrid-notify-from-email
              alias: SEND_GRID_NOTIFY_FROM_EMAIL
