pipeline {
    agent any
    stages {
        stage('Validate') {
            steps {
                sh "./tests/run.sh --verbose --junit"
            }
            post {
                always {
                    junit "tests/*.xml"
                }
            }
        }
    }
    libraries {
        lib('Pipeline')
    }
    post {
        unsuccessful {
            notifyBuildFailure channel: "rpe-build-notices"
        }
        fixed {
            notifyBuildFixed channel: "rpe-build-notices"
        }
    }
}
