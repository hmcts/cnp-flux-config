---
apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: osba
  namespace: osba
  annotations:
    #fluxcd.io/ignore: true
    flux.weave.works/automated: "false"
spec:
  releaseName: osba
  chart:
    git: https://github.com/hmcts/open-service-broker-azure
    ref: master
    path: contrib/k8s/charts/open-service-broker-azure
  valueFileSecrets:
  - name: "osba-values"
  values:
    image:
      repository: osbapublicacr.azurecr.io/microsoft/azure-service-broker
      tag: v1.8.4
    tls:
      enabled: false
    redis:
      cluster:
        enabled: true
        slaveCount: 1
      master:
        persistence:
          enabled: false
      slave:
        persistence:
          enabled: false
