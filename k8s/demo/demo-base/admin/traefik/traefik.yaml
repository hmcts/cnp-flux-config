apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: traefik
  namespace: admin
spec:
  forceUpgrade: true
  valueFileSecrets:
    - name: "traefik-values"
  values:
    service:
    kubernetes:
      ingressEndpoint:
        useDefaultPublishedService: true
    ssl:
      enabled: true
      enforced: true
      permanentRedirect: true
    debug:
      enabled: true