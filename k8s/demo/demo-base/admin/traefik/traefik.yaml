apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: traefik
  namespace: admin
spec:
  forceUpgrade: true
  valueFileSecrets:
    - name: "traefik-values"
  values:
    kubernetes:
      ingressEndpoint:
        useDefaultPublishedService: true
    ssl:
      enabled: true
      enforced: true
      permanentRedirect: true
    startupArguments:
      - --logLevel=DEBUG
    forwardAuth:
      entryPoints: [“http”, “https”]
      address: https://traefik-forward-auth.admin:4443
      trustForwardHeader: true