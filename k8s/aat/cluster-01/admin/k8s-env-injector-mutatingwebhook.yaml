apiVersion: admissionregistration.k8s.io/v1beta1
kind: MutatingWebhookConfiguration
metadata:
  name: env-injector-webhook-cfg
  namespace: admin
  labels:
    app: env-injector
webhooks:
  - name: env-injector.hmcts.net
    clientConfig:
      service:
        name: env-injector-webhook-svc
        namespace: admin
        path: "/mutate"
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUV4ekNDQXErZ0F3SUJBZ0lRWkd4SFhsRG9weE1lSXhxZ2tDbDdwakFOQmdrcWhraUc5dzBCQVFzRkFEQU4KTVFzd0NRWURWUVFERXdKallUQWVGdzB4T1RFeE1ERXdPREkwTXpOYUZ3MDBPVEV3TWpRd09ETTBNek5hTUEweApDekFKQmdOVkJBTVRBbU5oTUlJQ0lqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FnOEFNSUlDQ2dLQ0FnRUF3c1Z2CjNXRjhIS0QrSW9RaS9ETzBjQUcyUFJYVnI2R2RaRVc1MTM3UEwvamo3aW0xOEVzSmpGVXZBVDkzTnBrY202Y3gKMC9wV0haTHRMYUFjTmlkc0VuN24vaTYweGdpV1ordFFLWXBRbkU5WFNMcHh4RjBJbTB6RWxOVnFpS0U5b29GTwpOVmlJN3VWOHNmVWhBam1lbDVTTDVsWUwxNkQ1Z1V1NzhOZmJmRVRUMmpsN0s3YThsSDFNMHkxay8xTTRFcDllCkpwRG1RUm9vUmRGNlJqN0d2QkFQWHBaVURPY2o1eURoREV3Z2k1WjNYd2xxWnhKazk3cTlUOGdjY1ZTLzVSaSsKTEhOT1pmOEZhbUZxTEtMUnlyYSs2TndUcS9keWpRd1ZYTEdBRG5HaXZVNldHanBHbDZXNmJIZ21uY2tOYmVCTAowcDl6SHV1c3FTZHJLYUFOZC9tWGxuVzdhMnJvMHBMRWhNYjgyK05vRGZxTlVNVFUyK2ZoTHZLRlpPdzFkWGV3CkJrOHVQUXF4cjV4U2gzRUZQQkFQeHN2Z2o0djFLRjdmYzRUaGdRVnFFTTdHY3Q1MzV6b2tTeDhDVkdaUDlvTEcKTVBDZHZmZGtoUnlvUmZDTFliN256SXlwLzhJUmNCQTBJSDd3S3l2NHZseFZwTnZJM3kwS2JHYmkzVEovbEZnRQpJRnRTVmQ5dUx0QVpzelp2cUlUY056OGJsQlFabHREM0UwV0oxQUhrTC9rNWZhRi9OR1FISEo5TTdBbHgzeVJzCmR4bUFMb2V6MERyRDNDZnEzS3hycDVuTkkvNnB6RUVlVlUybmFTT1JlRHBJdVlUMEN5VzRBSFdOdFc0S2U2djQKaC9VRDBLU0ZGeTAyK1JUQzdIRmEyZlZhQmhJSVJWKzd0QlBVT05VQ0F3RUFBYU1qTUNFd0RnWURWUjBQQVFILwpCQVFEQWdLa01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dJQkFDdSs5eVhSCjQwaWx1UklXODFJNDg5eGt6Y09UR3pjdkpqRm11WDVVTlVsbjRZTVVZcXAzbVFLaHFnNlUybGxVSzBpd0RydlMKa1lQZlU2SU5UVG42S0VtUkdremMwNDhaMUVTUTdWNnk4Z3FLcUNQbVl6T2MvMktWcHRUR0M5OS8wWjFEc092ZwpLQndCNVpMREVUMDdKWjlISVdpTnEvcnR2SHhSRFJ4cGhpSG42TjNJQm0xZUpYRUc0SkJoZXVWTGQ3WmdmQk96CkUyc2tUbDdwTUFjNkNRODFqcmR4R3pQWnZlRDlidXJYcG1EYnJabndhME5wRVlGTmRYNVNsczRtQkFRYmZSaS8KWHV6ajhXbi80bFg2ZGlENDBmb0ttU2xhVFVnVThFbUNLeVZTZGJvRmtEbmxvRFJnWXdjRzA3aDVpdWNtZGkwbAo2bzExTitIay90a3E3d3M4ZE5ZeGNTU1VrMzhnODQ3U00rMDRqSHRPeTJDVlFEczZVbHp0cUhWaFVMTzhtd2hQCk5WdVAvWnk0dndXclk4amJRRkVDQ3BaODcwN1g1S2l4WSsyWXVTSjRrOTY2Um1TRWEyNGtQQkUrcy9xcUlVYXEKeXV1aE13bE5udkprakRPdGpIY1NpQmlyTkJudnpzdXJhcmVLVHBtT0NMQWNtMGtiN2Y5U254YkxTVnVvdnRYTApjRUY3YXh6bjdublVrMUJVVzFjUi9WWFFLakp3KzkzNEhNR1VjRDhFZ3FhMk0weS9hVGg5MlNXVmt0Mlc2NlBQClZCTXgzemZTS1FKMlJScnF1ZlRySCtLV2tpejU4d3NEU2V3bzhJUktYalVObm1rM2J2N2s3VWpSMGFTUnY2c2gKZXBaUmRWUk9hMUlVSXlTb2dCWHgrbVBnYk9keFBCOVNpcHlSCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    rules:
      - operations: [ "CREATE" ]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
    namespaceSelector:
      matchLabels:
        hmcts.github.com/envInjector: enabled
