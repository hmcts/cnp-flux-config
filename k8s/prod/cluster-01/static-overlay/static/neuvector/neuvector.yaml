---
apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: neuvector
  namespace: neuvector
spec:
  values:
    keyvault:
      name: cft-apps-prod
      resourcegroup: core-infra-prod-rg
      subscriptionid: 8cbc6f36-7c56-4963-9d36-739db5d00b27
      tenantid: 531ff96d-0ae9-462a-8d2d-bec7c0b42082
    neuvector:
      controller:
        azureFileShare:
          secretName: nv-storage-secret
          shareName: neuvector-data-01
        ingress:
          host:  neuvector01-api.service.core-compute-prod.internal
        configmap:
          data:
            samlinitcfg.yaml: |
              SSO_URL: https://login.microsoftonline.com/531ff96d-0ae9-462a-8d2d-bec7c0b42082/saml2
              Issuer: https://sts.windows.net/531ff96d-0ae9-462a-8d2d-bec7c0b42082/
              X509_Cert: |
                -----BEGIN CERTIFICATE-----
                MIIC8DCCAdigAwIBAgIQPf8NTIMifoNHZ9yz1ucyfzANBgkqhkiG9w0BAQsFADA0MTIwMAYDVQQD
                EylNaWNyb3NvZnQgQXp1cmUgRmVkZXJhdGVkIFNTTyBDZXJ0aWZpY2F0ZTAeFw0xOTA4MTIxMzIx
                NTFaFw0yMjA4MTIxMzIxNTFaMDQxMjAwBgNVBAMTKU1pY3Jvc29mdCBBenVyZSBGZWRlcmF0ZWQg
                U1NPIENlcnRpZmljYXRlMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAoXwIbxK6GG9n
                p5A4hXn40Adr1tr9bwCA8fxydSWiOJ25Xhws6k0wkzangPDTRrmW8fPYTOrLq7zom4xTI7SY60AH
                JUt7Mbae8lGro+uKjSbrkdBBxte4lMuUV1clG59z7mXrKm/JeihqbfiPGILDE9JXxsEeozK3cTR1
                H05rG5lbqIn3coyfanuiXtZYrz27K+Qh7iNDMT1YMF5JXAcf3yiviUdqVTfBG2Ud3GIRDebZWLR+
                2dyn6fS/Q7EjgtrjagpSopzUWdd/MREAv5sYUsoyRk0odWuRPKCl9sD+BUyM7uM0pQniDN25J1bI
                jYCMzMbA+01bMOdaEeVhsafvaQIDAQABMA0GCSqGSIb3DQEBCwUAA4IBAQBftRvwLR1qJ31/WXG0
                TdnFgmn/Djy/YkNq6HJTZmrZG075VsD9e8YTUz5my0VJtwrmpmDrIt7GD8qGdO9QRtKdkS8dQ1ab
                xpySdbobliJc/40O7GeGiVP1tFq/25fMYNtP67tV98ZLNxR0+GMKIBuvVDLTanH7bBAEIYf0+YBj
                MEiBc+FEr5hICXyJOkB1FOzbOVk7cVeNdq+kMZkjAu+eHkFK7yqkcGfJ96qkkBfc2/N2ZhgIGMP8
                +JWaAqc5yY+oz8uXaWMAGL9UJBKCEelqMq4V35S5iY/ymIBldSiJO908iUL1CwgkHxUhdX7v90iv
                1djNu2XWVu1sWb4jwsHV
                -----END CERTIFICATE-----
              Enable: true
              Default_Role: reader
              Role_Groups:
                admin:
                  - 300e771f-856c-45cc-b899-40d78281e9c1 
                  - c36eaede-a0ae-4967-8fed-0a02960b1370
            sysinitcfg.yaml: |
              New_Service_Policy_Mode: Discover
              Syslog_ip: fluentbit-log
              Syslog_IP_Proto: 6
              Syslog_Port: 5140
              Syslog_Level: Warning
              Syslog_status: true
              Syslog_Categories:
                - event
                - security-event
                - audit
              Cluster_Name: prod01
      manager:
        ingress:
          host: neuvector01.service.core-compute-prod.internal
