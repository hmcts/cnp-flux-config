apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
bases:
- ../../admin/flux
- ../../admin/fluxcloud
- ../../admin/kube-slack
- ../../admin/keyvault-flexvol
- ../../admin/traefik
- ../../admin/jenkins
- ../../kured
- ../../monitoring

patchesStrategicMerge:
#flux patches
- ../../admin/flux/patches/cftptl/flux.yaml
- ../../admin/flux/patches/cftptl/cluster-00/flux.yaml

#fluxcloud patch
- ../../admin/fluxcloud/patches/cftptl/cluster-00/fluxcloud.yaml

#kube-slack patch
- ../../admin/kube-slack/patches/cftptl/cluster-00/kube-slack.yaml

#traefik patch
- ../../admin/traefik/patches/cftptl/cluster-00/traefik.yaml

# jenkins
- ../../admin/jenkins/patches/cftptl/cluster-00/disk.yaml
- ../../admin/jenkins/patches/cftptl/cluster-00/identity.yaml
- ../../admin/jenkins/patches/cftptl/cluster-00/jenkins.yaml

#kured patch
- ../../kured/patches/cftptl/cluster-00/kured.yaml

#prom-operator patch
- ../../monitoring/patches/cftptl/cluster-00/prom-operator.yaml

patchesJson6902:
- target:
    group: helm.fluxcd.io
    version: v1
    kind: HelmRelease
    name: jenkins
    namespace: jenkins
  path: ../../admin/jenkins/patches/cftptl/cluster-00/jenkins-flexvolume.yaml