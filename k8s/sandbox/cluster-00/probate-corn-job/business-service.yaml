---
apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: probate-corn-job-test
  namespace: probate
  annotations:
    flux.weave.works/automated: "true"
    flux.weave.works/ignore: "false"
spec:
  releaseName: probate-corn-job-test-1
  rollback:
    enable: true
  chart:
    image: https://hmctspublic.azurecr.io/helm/v1/repo/
    name: job
    version: 0.5.2
  values:
    job:
      image: 'hmctspublic.azurecr.io/docker-curl:latest'
      schedule: "0/4 0 * * *"
      aadIdentityName: probate
      args: 
        - -X 
        - GET
        - https://www.apply-for-probate.service.gov.uk/caveats/health
      environment:
        APP: PROBATE
    global:
      jobKind: CronJob
      tenantId: "531ff96d-0ae9-462a-8d2d-bec7c0b42082"
      environment: saat

